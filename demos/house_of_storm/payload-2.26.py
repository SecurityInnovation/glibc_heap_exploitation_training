'''
House of Storm debugging startup
'''

from pwn import * 

mode = 'DEBU' # Turn on gdb
libc_name='../../libc_versions/2.26/libc-2.26.so'
env = {}

# Binary setup
elf_name = './.house_of_storm-2.26' 

elf = ELF(elf_name)
if libc_name != '': 
	libc = ELF(libc_name)
	env = {"LD_PRELOAD": libc.path}
	
# Process creation 
if mode == 'DEBUG': 
	p = process([elf.path],env=env)
	gdb.attach(p, gdbscript='''
dir ../../libc_versions/2.26/
list main
''') 

else:
	p = process([elf.path],env=env)

p.interactive()

