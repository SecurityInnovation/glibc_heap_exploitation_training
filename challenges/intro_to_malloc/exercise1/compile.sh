#!/bin/bash 

# Compilation script for this challenge :) 
# Deals with the elfpatching and versioning for us
all_versions=( 2.23 ) # Needs to be 2.25 or below in order to use fastbins
file_name=fix_chunk

# Compile the code
$(gcc fix_chunk.c -o fix_chunk -ggdb -O0)

for version in "${all_versions[@]}" 
do 

	echo "./.$file_name"
	# Copy into a new version specific file 	
	cp $file_name ./.$file_name
	
	# Get the loader and patch the loader of the new file
	loader=$(realpath $(pwd)/../../../libc_versions/$version/ld-$version.so)
	patchelf --set-interpreter $loader ./.$file_name

done



