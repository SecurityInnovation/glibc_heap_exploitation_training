# Overlapping Chunks

## File Structure
- exercise1/: Overlapping a chunk with another 
    - start.py: The starting point for the challenge
    - solution.py: Full working POC for the challenge
    - overlap.c: The source code for the challenge
    - overlap: The binary for the challenge
    - compile.sh: Compilation script for the challenge
- OverlappingChunks.pptx: Slides for the techniques

## Flow of Folder
- First, read through the slides until the exercise comes up
- Exercise1/:
    - When it comes up in the slides, do this exercise. 
    - Start with ``start.py`` until the challenge has been completed. 
    - Teaches you, with a hands on challenge, how to abuse chunk overlapping to corrupt arbitrary data
- Finish the slides
- List below how the overlapping chunks technique works in other bins, besides the TCache

## Protection to Overlapping Chunks
### TCache
- Simply overwrite a chunks size that will go into the tcache bin... it is REALLY that easy! The POC (in payload) does this. 

### Fastbin 
- The NEXT size of the chunk also needs to be legit (cannot be too large or too small): 
	- https://elixir.bootlin.com/glibc/glibc-2.29/source/malloc/malloc.c#L4239
- Just a single calculated value is needed for this to work.

### Unsorted Bin
- Must have the prev_inuse bit on the nextsize chunk set: 
	- https://elixir.bootlin.com/glibc/glibc-2.29/source/malloc/malloc.c#L4324
- Legit nextsize: 
	- https://elixir.bootlin.com/glibc/glibc-2.29/source/malloc/malloc.c#L4328
- Consolidation validation checks on the previous chunk and the next chunk

