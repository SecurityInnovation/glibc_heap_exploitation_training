#include <stdlib.h>
#include <stdio.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <string.h>
#include <unistd.h>

#include "server.h"
#include "utils.h"

/*

*/
char* route1_func(){
   
}

/*
Reflects a header, body or query parameter
*/
char* echo_servce(){

}

struct route** create_routes(){
    struct route** my_routes = malloc(sizeof(struct route*) * 0x20);

    // The first route
    struct route* route1 = malloc(sizeof(struct route));
    strcpy(route1->verb, "GET");
    route1->route = malloc(0x20);
    strcpy(route1->route, "/CallGet"); 
    route1->handle_callback = &route1_func;
    my_routes[0] = route1;

    // The second route - echo some data back
    struct route* route2 = malloc(sizeof(struct route));
    strcpy(route2->verb, "ALL");
    route2->route = malloc(0x20);
    strcpy(route2->route, "/echo"); 

    route2->handle_callback = &echo_servce;
    my_routes[0] = route1;   
}

int main(){

    // Setup everything
    int sockfd = initialize_server(create_routes());

    // Serve the website
    serve(sockfd);
}